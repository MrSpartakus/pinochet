df$male <- ifelse(male == 2, 0,
ifelse(male == 1), 1,
NA)
df$male <- ifelse(male == 2, 0, male)
# Recode male
df$male <- as.numeric(df$male)
df$male <- ifelse(df$male == 2, 0, df$male)
## Load raw data
df <- readxl::read_xlsx("data/raw-data.xlsx")
## Data manipulation
# Convert names to lowercase
names(df) <- tolower(names(df))
# Convert Age == "unknown" values to NA
df$age[df$age == "unknown"] <- NA
# Rename variables
df <- plyr::rename(df,
c("merged id" = "merged_id",
"start date" = "start_date",
"end date" = "end_date",
"last name" = "last_name",
"first name" = "first_name",
"sex (c)" = "male",
"occupation (c)" = "occupation",
"occupation" = "occupation_2",
"victim affiliation (c)" = "victim_affiliation",
"victim affiliation" = "victim_affiliation2",
"violence (c)" = "violence",
"method (c)" = "method",
"interrogation (c)" = "interrogation",
"torture (c)" = "torture",
"war tribunal" = "war_tribunal",
"previous arrests (#)" = "number_previous_arrests",
"perpetrator affiliation (c)" = "perpetrator_affiliation",
"place-1" = "place_1",
"start location-1" = "start_location_1",
"latitude-1" = "latitude_1",
"longitude-1" = "longitude_1",
"exact coordinates-1" = "exact_coordinates_1",
"place-2" = "place_2",
"location-2" = "location_2",
"latitude-2" = "latitude_2",
"longitude-2" = "longitude_2",
"exact coordinates-2" = "exact_coordinates_2",
"place ©-3" = "place_3",
"end location-3" = "end_location_3",
"latitude-3" = "latitude_3",
"longitude-3" = "longitude_3",
"exact coordinates-3" = "exact_coordinates_3",
"place (c)-4" = "place_4",
"end location-4" = "end_location_4",
"latitude-4" = "latitude_4",
"longitude-4" = "longitude_4",
"exact coordinates-4" = "exact_coordinates_4",
"place (c)-5" = "place_5",
"end location-5" = "end_location_5",
"latitude-5" = "latitude_5",
"longitude-5" = "longitude_5",
"exact coordinates-5" = "exact_coordinates_5",
"place (c)-6" = "place_6",
"end location-6" = "end_location_6",
"latitude-6" = "latitude_6",
"longitude-6" = "longitude_6",
"exact coordinates-6" = "exact_coordinates_6"
))
# Transform variables
df <- transform(df,
merged_id = as.integer(merged_id),
start_date = as.Date(start_date, "%d/%m/%Y"),
end_date = as.Date(end_date, "%d/%m/%Y"),
minor = as.factor(minor),
age = as.numeric(age),
violence = as.integer(violence),
method = as.integer(method),
number_previous_arrests = as.integer(number_previous_arrests),
perpetrator_affiliation = as.integer(perpetrator_affiliation),
place_1 = as.integer(place_1),
exact_coordinates_1 = as.numeric(exact_coordinates_1),
exact_coordinates_2 = as.numeric(exact_coordinates_2),
exact_coordinates_3 = as.numeric(exact_coordinates_3),
exact_coordinates_4 = as.numeric(exact_coordinates_4),
exact_coordinates_5 = as.numeric(exact_coordinates_5)
)
# Recode male
df$male <- as.numeric(df$male)
df$male <- ifelse(df$male == 2, 0, df$male)
# Recode torture and interrogation
df$torture <- ifelse(df$torture > 2 | is.na(df$torture), "NA",
ifelse(df$torture == 2, 0, df$torture))
df$interrogation <- ifelse(df$interrogation > 2 | is.na(df$interrogation), "NA",
ifelse(df$interrogation == 2, 0, df$interrogation))
# Revalue variables
df$minor <- plyr::revalue(df$minor, c("y" = 1, "n" = 0))
summary(df$male)
## Save
readr::write_csv(df, "dataset.csv")
df <- read_csv("data/dataset.csv")
df <- read.csv("data/dataset.csv",header = T)
summary(df)
View(df)
# Recode occupation
df$occupation <- as.factor(df$occupation)
df$occupation <- dplyr::recode_factor(df$occupation,
1 == "white collar", 2 == "blue collar",
3 == "school student", 4 == "university student",
5 == "military", 6 == "non-military government",
7 == "unemployed", 8 == NA, 9 == "ex-military")
# Recode occupation
df$occupation <- as.factor(df$occupation)
df$occupation <- dplyr::recode_factor(df$occupation,
1 == "white collar", 2 == "blue collar",
3 == "school student", 4 == "university student",
5 == "military", 6 == "non-military government",
7 == "unemployed", 8 == "NA", 9 == "ex-military")
# Recode occupation
df$occupation <- as.factor(df$occupation)
df$occupation <- dplyr::recode_factor(df$occupation,
1 == "white collar", 2 == "blue collar",
3 == "school student", 4 == "university student",
5 == "military", 6 == "non-military government",
7 == "unemployed", 8 == "unknown", 9 == "ex-military")
## Load raw data
df <- readxl::read_xlsx("data/raw-data.xlsx")
## Data manipulation
# Convert names to lowercase
names(df) <- tolower(names(df))
# Convert Age == "unknown" values to NA
df$age[df$age == "unknown"] <- NA
# Rename variables
df <- plyr::rename(df,
c("merged id" = "merged_id",
"start date" = "start_date",
"end date" = "end_date",
"last name" = "last_name",
"first name" = "first_name",
"sex (c)" = "male",
"occupation (c)" = "occupation",
"occupation" = "occupation_2",
"victim affiliation (c)" = "victim_affiliation",
"victim affiliation" = "victim_affiliation2",
"violence (c)" = "violence",
"method (c)" = "method",
"interrogation (c)" = "interrogation",
"torture (c)" = "torture",
"war tribunal" = "war_tribunal",
"previous arrests (#)" = "number_previous_arrests",
"perpetrator affiliation (c)" = "perpetrator_affiliation",
"place-1" = "place_1",
"start location-1" = "start_location_1",
"latitude-1" = "latitude_1",
"longitude-1" = "longitude_1",
"exact coordinates-1" = "exact_coordinates_1",
"place-2" = "place_2",
"location-2" = "location_2",
"latitude-2" = "latitude_2",
"longitude-2" = "longitude_2",
"exact coordinates-2" = "exact_coordinates_2",
"place ©-3" = "place_3",
"end location-3" = "end_location_3",
"latitude-3" = "latitude_3",
"longitude-3" = "longitude_3",
"exact coordinates-3" = "exact_coordinates_3",
"place (c)-4" = "place_4",
"end location-4" = "end_location_4",
"latitude-4" = "latitude_4",
"longitude-4" = "longitude_4",
"exact coordinates-4" = "exact_coordinates_4",
"place (c)-5" = "place_5",
"end location-5" = "end_location_5",
"latitude-5" = "latitude_5",
"longitude-5" = "longitude_5",
"exact coordinates-5" = "exact_coordinates_5",
"place (c)-6" = "place_6",
"end location-6" = "end_location_6",
"latitude-6" = "latitude_6",
"longitude-6" = "longitude_6",
"exact coordinates-6" = "exact_coordinates_6"
))
# Transform variables
df <- transform(df,
region = as.character(region),
page = as.character(date),
last_name = as.character(last_name),
first_name = as.character(first_name),
nationality = as.character(nationality),
minor = as.factor(minor),
age = as.numeric(age),
violence = as.integer(violence),
method = as.integer(method),
number_previous_arrests = as.integer(number_previous_arrests),
perpetrator_affiliation = as.integer(perpetrator_affiliation),
place_1 = as.integer(place_1),
exact_coordinates_1 = as.numeric(exact_coordinates_1),
exact_coordinates_2 = as.numeric(exact_coordinates_2),
exact_coordinates_3 = as.numeric(exact_coordinates_3),
exact_coordinates_4 = as.numeric(exact_coordinates_4),
exact_coordinates_5 = as.numeric(exact_coordinates_5)
)
# Recode male
df$male <- as.factor(df$male)
df$male <- ifelse(df$male == 2, 0, df$male)
# Recode occupation
df$occupation <- as.factor(df$occupation)
df$occupation <- dplyr::recode_factor(df$occupation,
1 == "white collar", 2 == "blue collar",
3 == "school student", 4 == "university student",
5 == "military", 6 == "non-military government",
7 == "unemployed", 8 == "unknown", 9 == "ex-military")
## Install required R packages
if (!require("plyr")) {
install.packages("plyr")
}
if (!require("tidyverse")) {
install.packages("tidyverse")
}
if (!require("devtools")) {
install.packages("devtools")
}
if (!require("narnia")) {
install_github("njtierney/narnia")
}
if (!require("rnaturalearth")) {
install.packages("rnaturalearth")
}
## Load raw data
df <- readxl::read_xlsx("data/raw-data.xlsx")
## Data manipulation
# Convert names to lowercase
names(df) <- tolower(names(df))
# Rename variables
df <- plyr::rename(df,
c("merged id" = "merged_id",
"start date" = "start_date",
"end date" = "end_date",
"last name" = "last_name",
"first name" = "first_name",
"sex (c)" = "male",
"occupation (c)" = "occupation",
"occupation" = "occupation_2",
"victim affiliation (c)" = "victim_affiliation",
"victim affiliation" = "victim_affiliation2",
"violence (c)" = "violence",
"method (c)" = "method",
"interrogation (c)" = "interrogation",
"torture (c)" = "torture",
"war tribunal" = "war_tribunal",
"previous arrests (#)" = "number_previous_arrests",
"perpetrator affiliation (c)" = "perpetrator_affiliation",
"place-1" = "place_1",
"start location-1" = "start_location_1",
"latitude-1" = "latitude_1",
"longitude-1" = "longitude_1",
"exact coordinates-1" = "exact_coordinates_1",
"place-2" = "place_2",
"location-2" = "location_2",
"latitude-2" = "latitude_2",
"longitude-2" = "longitude_2",
"exact coordinates-2" = "exact_coordinates_2",
"place ©-3" = "place_3",
"end location-3" = "end_location_3",
"latitude-3" = "latitude_3",
"longitude-3" = "longitude_3",
"exact coordinates-3" = "exact_coordinates_3",
"place (c)-4" = "place_4",
"end location-4" = "end_location_4",
"latitude-4" = "latitude_4",
"longitude-4" = "longitude_4",
"exact coordinates-4" = "exact_coordinates_4",
"place (c)-5" = "place_5",
"end location-5" = "end_location_5",
"latitude-5" = "latitude_5",
"longitude-5" = "longitude_5",
"exact coordinates-5" = "exact_coordinates_5",
"place (c)-6" = "place_6",
"end location-6" = "end_location_6",
"latitude-6" = "latitude_6",
"longitude-6" = "longitude_6",
"exact coordinates-6" = "exact_coordinates_6"
))
# Transform variables
df <- transform(df,
region = as.character(region),
page = as.character(date),
last_name = as.character(last_name),
first_name = as.character(first_name),
nationality = as.character(nationality),
minor = as.factor(minor),
age = as.numeric(age),
violence = as.integer(violence),
method = as.integer(method),
number_previous_arrests = as.integer(number_previous_arrests),
perpetrator_affiliation = as.integer(perpetrator_affiliation),
place_1 = as.integer(place_1),
exact_coordinates_1 = as.numeric(exact_coordinates_1),
exact_coordinates_2 = as.numeric(exact_coordinates_2),
exact_coordinates_3 = as.numeric(exact_coordinates_3),
exact_coordinates_4 = as.numeric(exact_coordinates_4),
exact_coordinates_5 = as.numeric(exact_coordinates_5)
)
# Convert Age == "unknown" values to NA
df$age[df$age == "unknown"] <- NA
# Recode male
df$male <- as.factor(df$male)
df$male <- ifelse(df$male == 2, 0, df$male)
# Recode torture and interrogation
df$torture <- ifelse(df$torture > 2 | is.na(df$torture), "NA",
ifelse(df$torture == 2, 0, df$torture))
df$interrogation <- ifelse(df$interrogation > 2 | is.na(df$interrogation), "NA",
ifelse(df$interrogation == 2, 0, df$interrogation))
summary(df$torture)
## Load raw data
df <- readxl::read_xlsx("data/raw-data.xlsx")
## Data manipulation
# Convert names to lowercase
names(df) <- tolower(names(df))
# Rename variables
df <- plyr::rename(df,
c("merged id" = "merged_id",
"start date" = "start_date",
"end date" = "end_date",
"last name" = "last_name",
"first name" = "first_name",
"sex (c)" = "male",
"occupation (c)" = "occupation",
"occupation" = "occupation_2",
"victim affiliation (c)" = "victim_affiliation",
"victim affiliation" = "victim_affiliation2",
"violence (c)" = "violence",
"method (c)" = "method",
"interrogation (c)" = "interrogation",
"torture (c)" = "torture",
"war tribunal" = "war_tribunal",
"previous arrests (#)" = "number_previous_arrests",
"perpetrator affiliation (c)" = "perpetrator_affiliation",
"place-1" = "place_1",
"start location-1" = "start_location_1",
"latitude-1" = "latitude_1",
"longitude-1" = "longitude_1",
"exact coordinates-1" = "exact_coordinates_1",
"place-2" = "place_2",
"location-2" = "location_2",
"latitude-2" = "latitude_2",
"longitude-2" = "longitude_2",
"exact coordinates-2" = "exact_coordinates_2",
"place ©-3" = "place_3",
"end location-3" = "end_location_3",
"latitude-3" = "latitude_3",
"longitude-3" = "longitude_3",
"exact coordinates-3" = "exact_coordinates_3",
"place (c)-4" = "place_4",
"end location-4" = "end_location_4",
"latitude-4" = "latitude_4",
"longitude-4" = "longitude_4",
"exact coordinates-4" = "exact_coordinates_4",
"place (c)-5" = "place_5",
"end location-5" = "end_location_5",
"latitude-5" = "latitude_5",
"longitude-5" = "longitude_5",
"exact coordinates-5" = "exact_coordinates_5",
"place (c)-6" = "place_6",
"end location-6" = "end_location_6",
"latitude-6" = "latitude_6",
"longitude-6" = "longitude_6",
"exact coordinates-6" = "exact_coordinates_6"
))
summary(df)
summary(df$region)
unique(df$region)
## Load raw data
df <- readxl::read_xlsx("data/raw-data.xlsx")
## Data manipulation
# Convert names to lowercase
names(df) <- tolower(names(df))
# Rename variables
df <- plyr::rename(df,
c("merged id" = "merged_id",
"start date" = "start_date",
"end date" = "end_date",
"last name" = "last_name",
"first name" = "first_name",
"sex (c)" = "male",
"occupation (c)" = "occupation",
"occupation" = "occupation_2",
"victim affiliation (c)" = "victim_affiliation",
"victim affiliation" = "victim_affiliation2",
"violence (c)" = "violence",
"method (c)" = "method",
"interrogation (c)" = "interrogation",
"torture (c)" = "torture",
"war tribunal" = "war_tribunal",
"previous arrests (#)" = "number_previous_arrests",
"perpetrator affiliation (c)" = "perpetrator_affiliation",
"place-1" = "place_1",
"start location-1" = "start_location_1",
"latitude-1" = "latitude_1",
"longitude-1" = "longitude_1",
"exact coordinates-1" = "exact_coordinates_1",
"place-2" = "place_2",
"location-2" = "location_2",
"latitude-2" = "latitude_2",
"longitude-2" = "longitude_2",
"exact coordinates-2" = "exact_coordinates_2",
"place ©-3" = "place_3",
"end location-3" = "end_location_3",
"latitude-3" = "latitude_3",
"longitude-3" = "longitude_3",
"exact coordinates-3" = "exact_coordinates_3",
"place (c)-4" = "place_4",
"end location-4" = "end_location_4",
"latitude-4" = "latitude_4",
"longitude-4" = "longitude_4",
"exact coordinates-4" = "exact_coordinates_4",
"place (c)-5" = "place_5",
"end location-5" = "end_location_5",
"latitude-5" = "latitude_5",
"longitude-5" = "longitude_5",
"exact coordinates-5" = "exact_coordinates_5",
"place (c)-6" = "place_6",
"end location-6" = "end_location_6",
"latitude-6" = "latitude_6",
"longitude-6" = "longitude_6",
"exact coordinates-6" = "exact_coordinates_6"
))
# Convert Age == "unknown" values to NA
df$age[df$age == "unknown"] <- NA
summary(df$age)
# Convert Age == "unknown" values to NA
df$age <- as.numeric(df$age)
df$age[df$age == "unknown"] <- NA
summary(df$age)
# Recode male
df$male <- as.factor(df$male)
df$male <- ifelse(df$male == 2, 0, df$male)
summary(df$male)
df$male <- as.factor(df$male)
df$male <- ifelse(df$male == 2, 0,
ifelse(male == 1, 1, NA))
# Recode male
df$male <- as.factor(df$male)
df$male <- ifelse(df$male == 2, 0,
ifelse(df$male == 1, 1, NA))
df <- readxl::read_xlsx("data/raw-data.xlsx")
## Data manipulation
# Convert names to lowercase
names(df) <- tolower(names(df))
# Rename variables
df <- plyr::rename(df,
c("merged id" = "merged_id",
"start date" = "start_date",
"end date" = "end_date",
"last name" = "last_name",
"first name" = "first_name",
"sex (c)" = "male",
"occupation (c)" = "occupation",
"occupation" = "occupation_2",
"victim affiliation (c)" = "victim_affiliation",
"victim affiliation" = "victim_affiliation2",
"violence (c)" = "violence",
"method (c)" = "method",
"interrogation (c)" = "interrogation",
"torture (c)" = "torture",
"war tribunal" = "war_tribunal",
"previous arrests (#)" = "number_previous_arrests",
"perpetrator affiliation (c)" = "perpetrator_affiliation",
"place-1" = "place_1",
"start location-1" = "start_location_1",
"latitude-1" = "latitude_1",
"longitude-1" = "longitude_1",
"exact coordinates-1" = "exact_coordinates_1",
"place-2" = "place_2",
"location-2" = "location_2",
"latitude-2" = "latitude_2",
"longitude-2" = "longitude_2",
"exact coordinates-2" = "exact_coordinates_2",
"place ©-3" = "place_3",
"end location-3" = "end_location_3",
"latitude-3" = "latitude_3",
"longitude-3" = "longitude_3",
"exact coordinates-3" = "exact_coordinates_3",
"place (c)-4" = "place_4",
"end location-4" = "end_location_4",
"latitude-4" = "latitude_4",
"longitude-4" = "longitude_4",
"exact coordinates-4" = "exact_coordinates_4",
"place (c)-5" = "place_5",
"end location-5" = "end_location_5",
"latitude-5" = "latitude_5",
"longitude-5" = "longitude_5",
"exact coordinates-5" = "exact_coordinates_5",
"place (c)-6" = "place_6",
"end location-6" = "end_location_6",
"latitude-6" = "latitude_6",
"longitude-6" = "longitude_6",
"exact coordinates-6" = "exact_coordinates_6"
))
# Convert Age == "unknown" values to NA
df$age <- as.numeric(df$age)
df$age[df$age == "unknown"] <- NA
# Recode male
df$male <- as.factor(df$male)
df$male <- ifelse(df$male == 2, 0,
ifelse(df$male == 1, 1, NA))
summary(df$male)
summary(df$age)
xaringan:::inf_mr()
xaringan:::inf_mr()
xaringan:::inf_mr()
prop.test(12,n=14,p=0.5, correct = FALSE)
resume <- read.csv("https://raw.githubusercontent.com/pols1600/pols1600.github.io/master/datasets/causality/resume.csv")
names(resume)
resume$call_blacks <- subset(resume$call, subset == resume$race == "black")
resume$call_blacks <- subset(resume$call, subset = resume$race == "black")
resume$call_whites <- subset(resume$call, subset = resume$race == "white")
